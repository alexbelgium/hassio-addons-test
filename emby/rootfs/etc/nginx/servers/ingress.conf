   server {
    listen %%interface%%:%%port%% default_server;
    include /etc/nginx/includes/server_params.conf;
    include /etc/nginx/includes/proxy_params.conf;
    client_max_body_size 0;
    #root /app/emby/dashboard-ui;
    #index index.html;
    
    # https://emby.media/community/index.php?/topic/104238-playback-error-no-compatible-streams-are-currently-available/&do=findComment&comment=1097946
    proxy_buffering off;
    
    # https://emby.media/community/index.php?/topic/62193-content-security-policy-csp-development/
    add_header Content-Security-Policy "default-src 'none'; child-src 'self'; font-src 'self' data:; connect-src 'self' wss: ws: https://mb3admin.com https://github.com/MediaBrowser/; media-src 'self' blob: data: https://github.com/MediaBrowser/; manifest-src 'self'; base-uri 'none'; form-action 'self'; frame-ancestors 'self'; object-src 'none'; worker-src 'self' blob:; script-src 'self' https://www.gstatic.com; img-src data: https: http: ; style-src 'unsafe-inline' 'self' https://fonts.googleapis.com/css" always;
    
    location / {
      # Proxy pass
      proxy_pass http://127.0.0.1:8096;
           
      # Allow downloading fragments
      proxy_set_header Range $http_range;
      proxy_set_header If-Range $http_if_range;

      # Next three lines allow websockets
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      }

    location /embywebsocket {
      # Proxy pass
      proxy_pass http://127.0.0.1:8096;
      
      # Allow downloading fragments
      proxy_set_header Range $http_range;
      proxy_set_header If-Range $http_if_range;

      # Next three lines allow websockets
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      }

}
