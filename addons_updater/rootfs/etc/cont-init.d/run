#!/usr/bin/env bashio

bashio::log.info "Checking status of referenced addons..."

for addons in $(bashio::config "addon|keys"); do
    NAME=$(bashio::config "addon[${addons}].name")
    REPOSITORY=$(bashio::config "addon[${addons}].repository")
    UPSTREAM=$(bashio::config "addon[${addons}].upstream")
    CURRENT=$(bashio::config "addon[${addons}].current")
    BETA=$(bashio::config "addon[${addons}].beta")

    LASTVERSION=$(lastversion --pre $UPSTREAM)
    if [ $CURRENT != $LASTVERSION ]; then
        bashio::log.info "Addon &NAME will be updated from $CURRENT to $LASTVERSION"         
    else
        bashio::log.info "Addon &NAME is already up-to-date."
    fi
done

#If different, update git
#Update config.json
